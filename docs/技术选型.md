# 数据库选型

### SpringBoot支持3个嵌入式数据库
1. H2database：数据在一个db文件中，会有一个日志文件。
2. hsqldb：最后数据存储在一个script脚本文件中，有几个临时文件，总计2-6个。
3. derby：创建了一个文件夹，放了一堆数据文件（几十个）；10.15.2.0版本还改了包名，驱动都找不到，10.14.2.0还能用。

所以选H2database。

### 注意
1. H2数据库必须使用与创建时一致版本的驱动去连接，否则会损坏数据。
2. 使用第三方工具去连接前，一定要检查第三方工具使用的H2版本，是否与程序使用的一致。
___

# Bean拷贝框架选型

1. [Bean拷贝常用框架使用姿势与性能对比](https://www.bilibili.com/read/cv10986822)
2. 尽量减少非必要依赖。

所以选择Spring的BeanUtils，或对其进行二次封装。
___

# orm框架选型

### 对比
1. Spring-Jdbc：需要完全手写sql，比较麻烦，但是依赖少。
2. Spring-Data-Jdbc：Spring-Jdbc的增强；可以直接使用基本CRUD操作方法，减少SQL编写量。
3. Spring-Data-Jpa：太重了，批处理复杂，Hibernate对H2支持有BUG。
4. jooq：免费版对数据库类型和版本支持有限。
5. ebean：查阅相关资料，好像很棒的样子。
6. MyBatis：用的较多的，资料很多的。
7. MyBatis-plus：国产的MyBatis增强。

### 其他因素
1. SQL标准对标识符大小写不敏感，那么默认处理就取决于数据库产品了，可能大部分是转换为大写。H2转换为大写，MySQL转换为小写。
2. SQL标准规定分隔符（可能）是双引号，反正肯定不是反单引号（MySQL可能出于历史原因）。H2要手写SQL的话，标识符都得加上双引号，可能连接上有配置可以改。

### 结论
1. v1.0.0-v1.1.0，使用Jpa，因太重、不灵活，所以弃用。
2. v1.1.1-v2.x，使用Spring-Jdbc，因需求增加，手写全部SQL麻烦，所以更换。
3. v3.0.0开始，使用Spring-Data-Jdbc，以后如有复杂业务，考虑使用MyBatis。
___

# 使用webjars的理由

1. 离线可用；这个软件设计初衷就是可以无网络使用，如果前端资源依赖网络那就违背初衷了。
2. 用后端资源管理工具(maven)来统一管理前端依赖的版本。
___

# 备份方案选型

1. H2官方有两种备份：一是生成SQL脚本，二是导出备份文件。
2. 自己读取所有数据写到一个新文件里面。
3. 把数据文件直接拷贝一份到备份目录。

### 对比
1. H2官方推荐使用SQL脚本方式，但他的备份工具跟版本有一定的绑定关系，旧版导出的SQL新版不一定能直接用。
2. 没有什么大问题，但是表数量增加就会很麻烦。
3. 避免同时占用同一个文件就没问题。

所以选择方案3。
___

# 图形化的必要性

### 设想
1. 管理员的操作界面，举例功能：配置秘钥，启动停止服务等。

### 不需要图形化的理由
1. 只有本机使用才有图形化的必要；如果是部署在服务器提供服务，大概率是没有桌面环境的。
2. 增加jar包大小。
3. 秘钥第一次配置后，以后是不会轻易更换的。
4. 启动停止服务，不是频繁的操作。

### 需要图形化的理由
1. 方便操作。
2. 玩一下javafx。

目前选择玩一下。
___